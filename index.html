<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UC4AFC</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png" sizes="192x192">
<meta name="theme-color" content="#004080">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes"> <!-- legacy -->
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="UC4AFC">
<link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
<div id="intro" class="screen">
  <div class="branding">
    <img src="UClogo.png" alt="UC Logo" class="uc-logo" />
    <span class="afc-text">4AFC</span>
  </div>

  <p class="small">University of Canterbury Four-Alternative Forced Choice Speech Test</p>

  <input id="name" placeholder="Participant name/code" /><br />
  
  <div style="margin: 1rem 0;">
    <label style="margin-right: 1rem;">
      <input type="radio" name="listSelection" value="1" checked>List 1
    </label>
    <label>
      <input type="radio" name="listSelection" value="2">List 2
    </label>
  </div>
<label hidden>
    Delay (ms): <input id="delay" type="number" value="1500" />
  </label><br hidden>

  <button id="trainBtn">Training</button>
  <button id="demoBtn">Demo</button>
  <button id="startBtn">Start</button><br />
  <button id="calibrateBtn" disabled>Calibration</button>
<label>
  <br>Take a break every
  <input id="breakEvery" type="number" min="0" value="32" style="width:4em;">
  presentations (of 33 total)
</label>
 <!-- <p class="footer">
    &copy; 2025 G.O'B.
  </p>-->
</div>

<div id="instructions" class="screen">
  <h2 id="instructions-title"></h2>
  <p id="instructions-text"></p>
  <button id="backBtn">Back</button>
  <button id="okBtn">OK</button>
</div>

<!-- Break screen -->
<div id="break" class="screen" style="display:none;">
  <h2>You're doing a great job!</h2>
  <p>Let's take a break.</p>
  <button id="breakOkBtn">Ready to keep going?</button>
</div>

<div id="loading" class="screen" style="display:none; text-align:center; padding:2em;">
  <h2>‚è≥ Loading assets...</h2>
  <p>This may take a few seconds. Please wait...</p>
  <button id="loading-ok" style="display:none; margin-top: 1em;">OK</button>
</div>

<div id="countdown" style="font-size: 2rem; margin: 1rem auto; color: #444; display: none;"></div>

<div id="main" class="screen">
  <img id="training-img" />
</div>

<div id="test" class="screen">
  <button id="abortBtn" title="Abort test">‚ùå</button> 
  <audio id="stimulus"></audio>
<div class="grid-container">
  <div class="grid">
      <div><img id="opt0" /></div>
      <div><img id="opt1" /></div>
      <div><img id="opt2" /></div>
      <div><img id="opt3" /></div>
  </div>
</div>
</div>

<div id="thankyou" class="screen">
  <h1>Thank you for participating!</h1>
  <div class="small" id="fileinfo"></div>
  <button id="saveAgainBtn">Save again</button>
  <button id="emailBtn">Email</button>
  <button id="returnBtn">Return to Start</button>
</div>


  <script id="list-fallback" type="text/plain">
nose	rose	keys	tongue	nose	nose.mp3
dad	sad	hood	mum	dad	dad.mp3
purse	nurse	bus	keys	purse	purse.mp3
sock	rock	duck	boot	sock	sock.mp3
van	man	hen	bus	van	van.mp3
chalk	fork	duck	note	chalk	chalk.mp3
zip	ship	shop	suit	zip	zip.mp3
boat	coat	kite	van	boat	boat.mp3
rose	nose	keys	leaf	rose	rose.mp3
hen	pen	pan	bird	hen	hen.mp3
goat	boat	hut	hen	goat	goat.mp3
head	bed	card	feet	head	head.mp3
mop	shop	chip	hug	mop	mop.mp3
hug	bug	bag	seed	hug	hug.mp3
rug	bug	pig	mop	rug	rug.mp3
fan	van	bone	shark	fan	fan.mp3
night	kite	coat	rug	night	night.mp3
man	fan	pen	shark	man	man.mp3
fork	chalk	back	rug	fork	fork.mp3
rock	sock	fork	boot	rock	rock.mp3
nurse	purse	bus	coat	nurse	nurse.mp3
sad	dad	road	mum	sad	sad.mp3
shirt	dirt	nut	bed	shirt	shirt.mp3
kite	night	cot	park	kite	kite.mp3
coat	note	kite	sock	coat	coat.mp3
nut	hut	night	leaf	nut	nut.mp3
cat	hat	cot	bird	cat	cat.mp3
lock	sock	lick	knees	lock	lock.mp3
bug	hug	bag	hood	bug	bug.mp3
log	dog	leg	chin	log	log.mp3
pan	man	pen	king	pan	pan.mp3
beach	peach	beak	gate	beach	beach.mp3
chip	zip	chin	cake	chip	chip.mp3
bat	hat	back	duck	bat	bat.mp3
cone	bone	comb	pig	cone	cone.mp3
bite	light	bike	cap	bite	bite.mp3
cage	page	cake	knees	cage	cage.mp3
mouse	house	mouth	gate	mouse	mouse.mp3
suit	boot	soup	zip	suit	suit.mp3
shark	park	heart	goat	shark	shark.mp3
keys	knees	sheep	house	keys	keys.mp3
dog	log	rock	sheep	dog	dog.mp3
note	boat	cone	book	note	note.mp3
page	cage	cake	book	page	page.mp3
house	mouse	mouth	gate	house	house.mp3
ship	chip	lick	beach	ship	ship.mp3
feet	meat	seed	sack	feet	feet.mp3
boot	suit	soup	sack	boot	boot.mp3
bed	head	hen	hat	bed	bed.mp3
peach	beach	feet	log	peach	peach.mp3
bone	cone	comb	nut	bone	bone.mp3
park	shark	heart	road	park	park.mp3
light	bite	knife	mop	light	light.mp3
hat	bat	back	lick	hat	hat.mp3
tap	cap	cat	dog	tap	tap.mp3
meat	feet	dirt	dad	meat	meat.mp3
mum	hug	comb	lock	mum	mum.mp3
leaf	beach	knife	road	leaf	leaf.mp3
bus	duck	nurse	tap	bus	bus.mp3
bin	ship	man	shark	bin	bin.mp3
bag	dad	rug	meat	bag	bag.mp3
dirt	purse	boat	card	dirt	dirt.mp3
hood	book	bird	note	hood	hood.mp3
pig	bin	bug	hen	pig	pig.mp3
king	bin	tongue	man	king	king.mp3
card	heart	bird	page	card	card.mp3
heart	card	bite	nose	heart	heart.mp3
knees	leaf	rose	head	knees	knees.mp3
tongue	bug	king	mouth	tongue	tongue.mp3
beak	sheep	chalk	head	beak	beak.mp3
leg	pen	log	chin	leg	leg.mp3
back	cap	bike	shirt	back	back.mp3
pen	leg	pan	chalk	pen	pen.mp3
book	hood	beak	note	book	book.mp3
lick	chip	lock	mouth	lick	lick.mp3
duck	bus	park	goat	duck	duck.mp3
cot	rock	cat	bed	cot	cot.mp3
sheep	meat	shop	dog	sheep	sheep.mp3
seed	keys	sword	rose	seed	seed.mp3
bird	nurse	bed	tap	bird	bird.mp3
gate	cake	goat	fan	gate	gate.mp3
shop	cot	ship	bin	shop	shop.mp3
hut	mum	hat	king	hut	hut.mp3
sack	cat	sock	knife	sack	sack.mp3
sword	fork	sad	mum	sword	sword.mp3
knife	light	night	fork	knife	knife.mp3
soup	boot	suit	peach	soup	soup.mp3
chin	zip	chip	nose	chin	chin.mp3
bike	light	bite	van	bike	bike.mp3
mouth	house	mouse	nose	mouth	mouth.mp3
comb	bone	cone	pig	comb	comb.mp3
cap	bat	cat	dog	cap	cap.mp3
road	rose	sword	shirt	road	road.mp3
cake	cage	park	soup	cake	cake.mp3
  </script>

<script src="main.inline.js"></script>

<script>
  if ("serviceWorker" in navigator) {
    const isLocal = location.protocol === "file:";

    if (isLocal) {
      console.warn("üõë Skipping service worker: running from file://");
    } else {
      navigator.serviceWorker.register("service-worker.js")
        .then(reg => console.log("‚úÖ Service Worker registered:", reg.scope))
        .catch(err => console.warn("‚ö†Ô∏è Service Worker failed to register:", err));
    }
  }
</script>


</body>
</html>

